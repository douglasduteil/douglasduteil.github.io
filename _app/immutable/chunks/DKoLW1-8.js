import{I as L,aa as O,ab as S,ac as V,ad as Y,ae as I,af as E,Y as C,W as R,H as P,X as j,ag as T,g,s as D,a as x,d as p,ah as W,ai as $,aj as q,ak as B,al as K,am as X,T as z,c as F,h as b,_ as G,K as J,a1 as Q}from"./DmnL-4ka.js";import{r as U}from"./BqrmIwlQ.js";import{c as Z}from"./C5iK7URT.js";const ee=["touchstart","touchmove"];function ae(e){return ee.includes(e)}const re=new Set,A=new Set;function m(e){var a=this,s=a.ownerDocument,l=e.type,i=e.composedPath?.()||[],r=i[0]||e.target,f=0,c=e.__root;if(c){var d=i.indexOf(c);if(d!==-1&&(a===document||a===window)){e.__root=a;return}var _=i.indexOf(a);if(_===-1)return;d<=_&&(f=d)}if(r=i[f]||e.target,r!==a){L(e,"currentTarget",{configurable:!0,get(){return r||s}});var w=Y,o=I;O(null),S(null);try{for(var t,n=[];r!==null;){var h=r.assignedSlot||r.parentNode||r.host||null;try{var u=r["__"+l];if(u!=null&&(!r.disabled||e.target===r))if(V(u)){var[k,...H]=u;k.apply(r,[e,...H])}else u.call(r,e)}catch(y){t?n.push(y):t=y}if(e.cancelBubble||h===a||h===null)break;r=h}if(t){for(let y of n)queueMicrotask(()=>{throw y});throw t}}finally{e.__root=a,delete e.currentTarget,O(w),S(o)}}}function ie(e,a){var s=a==null?"":typeof a=="object"?a+"":a;s!==(e.__t??=e.nodeValue)&&(e.__t=s,e.nodeValue=s+"")}function te(e,a){return M(e,a)}function fe(e,a){E(),a.intro=a.intro??!1;const s=a.target,l=b,i=p;try{for(var r=C(s);r&&(r.nodeType!==R||r.data!==P);)r=j(r);if(!r)throw T;g(!0),D(r),x();const f=M(e,{...a,anchor:r});if(p===null||p.nodeType!==R||p.data!==W)throw $(),T;return g(!1),f}catch(f){if(f===T)return a.recover===!1&&q(),E(),B(s),g(!1),te(e,a);throw f}finally{g(l),D(i),U()}}const v=new Map;function M(e,{target:a,anchor:s,props:l={},events:i,context:r,intro:f=!0}){E();var c=new Set,d=o=>{for(var t=0;t<o.length;t++){var n=o[t];if(!c.has(n)){c.add(n);var h=ae(n);a.addEventListener(n,m,{passive:h});var u=v.get(n);u===void 0?(document.addEventListener(n,m,{passive:h}),v.set(n,1)):v.set(n,u+1)}}};d(K(re)),A.add(d);var _=void 0,w=X(()=>{var o=s??a.appendChild(z());return F(()=>{if(r){G({});var t=J;t.c=r}i&&(l.$$events=i),b&&Z(o,null),_=e(o,l)||{},b&&(I.nodes_end=p),r&&Q()}),()=>{for(var t of c){a.removeEventListener(t,m);var n=v.get(t);--n===0?(document.removeEventListener(t,m),v.delete(t)):v.set(t,n)}A.delete(d),o!==s&&o.parentNode?.removeChild(o)}});return N.set(_,w),_}let N=new WeakMap;function de(e,a){const s=N.get(e);return s?(N.delete(e),s(a)):Promise.resolve()}export{fe as h,te as m,ie as s,de as u};
