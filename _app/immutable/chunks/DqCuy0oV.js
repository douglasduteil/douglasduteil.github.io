import{I as L,a9 as N,aa as R,ab as V,ac as M,ad as D,ae as b,X as P,H as Y,W as j,af as T,g,s as O,a as x,d as p,ag as C,ah as W,ai as $,aj as q,ak as B,al as K,T as X,c as Z,h as E,Z as z,K as F,a0 as G}from"./CW7uFYjZ.js";import{r as J}from"./ChHVaG7T.js";import{c as Q}from"./CsClgcTx.js";const U=["touchstart","touchmove"];function ee(e){return U.includes(e)}const ae=new Set,A=new Set;function m(e){var a=this,s=a.ownerDocument,l=e.type,i=e.composedPath?.()||[],r=i[0]||e.target,f=0,c=e.__root;if(c){var d=i.indexOf(c);if(d!==-1&&(a===document||a===window)){e.__root=a;return}var _=i.indexOf(a);if(_===-1)return;d<=_&&(f=d)}if(r=i[f]||e.target,r!==a){L(e,"currentTarget",{configurable:!0,get(){return r||s}});var w=M,o=D;N(null),R(null);try{for(var t,n=[];r!==null;){var h=r.assignedSlot||r.parentNode||r.host||null;try{var u=r["__"+l];if(u!=null&&(!r.disabled||e.target===r))if(V(u)){var[k,...H]=u;k.apply(r,[e,...H])}else u.call(r,e)}catch(y){t?n.push(y):t=y}if(e.cancelBubble||h===a||h===null)break;r=h}if(t){for(let y of n)queueMicrotask(()=>{throw y});throw t}}finally{e.__root=a,delete e.currentTarget,N(w),R(o)}}}function oe(e,a){var s=a==null?"":typeof a=="object"?a+"":a;s!==(e.__t??=e.nodeValue)&&(e.__t=s,e.nodeValue=s+"")}function re(e,a){return I(e,a)}function ie(e,a){b(),a.intro=a.intro??!1;const s=a.target,l=E,i=p;try{for(var r=P(s);r&&(r.nodeType!==8||r.data!==Y);)r=j(r);if(!r)throw T;g(!0),O(r),x();const f=I(e,{...a,anchor:r});if(p===null||p.nodeType!==8||p.data!==C)throw W(),T;return g(!1),f}catch(f){if(f===T)return a.recover===!1&&$(),b(),q(s),g(!1),re(e,a);throw f}finally{g(l),O(i),J()}}const v=new Map;function I(e,{target:a,anchor:s,props:l={},events:i,context:r,intro:f=!0}){b();var c=new Set,d=o=>{for(var t=0;t<o.length;t++){var n=o[t];if(!c.has(n)){c.add(n);var h=ee(n);a.addEventListener(n,m,{passive:h});var u=v.get(n);u===void 0?(document.addEventListener(n,m,{passive:h}),v.set(n,1)):v.set(n,u+1)}}};d(B(ae)),A.add(d);var _=void 0,w=K(()=>{var o=s??a.appendChild(X());return Z(()=>{if(r){z({});var t=F;t.c=r}i&&(l.$$events=i),E&&Q(o,null),_=e(o,l)||{},E&&(D.nodes_end=p),r&&G()}),()=>{for(var t of c){a.removeEventListener(t,m);var n=v.get(t);--n===0?(document.removeEventListener(t,m),v.delete(t)):v.set(t,n)}A.delete(d),o!==s&&o.parentNode?.removeChild(o)}});return S.set(_,w),_}let S=new WeakMap;function fe(e,a){const s=S.get(e);return s?(S.delete(e),s(a)):Promise.resolve()}export{ie as h,re as m,oe as s,fe as u};
